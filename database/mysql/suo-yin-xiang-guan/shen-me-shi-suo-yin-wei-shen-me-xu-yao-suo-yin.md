# 什么是索引，为什么需要索引？

## 1.什么是索引？

索引（Index）是 数据库存储引擎 用来 快速查找数据 的一种数据结构，它类似于书籍的目录，能够加速数据的查找过程。

在 MySQL 中，索引是基于 B+ 树 或 哈希表 实现的（常见的是 B+ 树索引）。

简单来说，索引就是数据库表中的一个特殊的“目录”或者“排序结构”，用于加速数据的查找过程。

## 2.为什么需要索引？

索引的主要作用是 提高查询效率，就像查一本书时，通过目录快速找到内容，而不需要从第一页开始逐页翻阅。

### 主要优势

#### 1.提高查询速度

例如：SELECT \* FROM users WHERE age = 25;

* 没有索引时，MySQL 需要 扫描整个表（全表扫描），耗时较长。
* 有索引时，MySQL 可以 快速找到匹配的数据，查询速度大幅提升。

#### 2.加速 ORDER BY 和 GROUP BY 操作

* 如果 ORDER BY 的列上有索引，MySQL 直接利用索引排序，而不用额外排序，提高性能。

#### 3.加速 JOIN 操作

* 当多个表进行 JOIN 时，索引可以加快匹配速度，提高 JOIN 的效率。

#### 4.减少 IO 读写操作

* 索引让数据库 更少地扫描磁盘页，减少 IO 操作，加速查询。

#### 5.提高数据的约束性

* 主键索引（PRIMARY KEY） 和 唯一索引（UNIQUE） 可以确保数据的唯一性，避免重复数据。

## 3.为什么索引能提高查询效率？

索引的核心思想是 减少数据的查找范围，避免全表扫描（O(n)），使用更高效的搜索方式（如 B+ 树的 O(log n)）。

* 全表扫描（Table Scan）：需要遍历整个表，耗时长。
* 索引查找（Index Scan）：利用索引快速定位数据，通常使用 B+ 树的二分查找，大大减少查询次数。

## 4.索引的代价（索引不是万能的）

虽然索引可以提高查询速度，但它也有一定的代价：

### 1.索引占用存储空间

* 索引会额外占用磁盘空间，尤其是多个索引时，存储开销较大。

### 2.影响 INSERT、UPDATE、DELETE 性能

* 每次插入、更新、删除数据时，索引也需要同步更新，带来额外的计算开销，影响写入性能。

### 3.滥用索引可能导致优化失败

* 错误的索引设计 可能会降低查询性能，比如 冗余索引、低选择性索引（如性别字段：男/女）

## 5.什么时候应该使用索引

### ✅ 适合使用索引的情况

* 经常用于 WHERE 过滤 的字段
* 需要 ORDER BY / GROUP BY / DISTINCT 的字段
* JOIN 连接 需要匹配的字段
* 经常用于 范围查询 (BETWEEN / < / >)
* 高选择性字段（即字段的值比较唯一，如用户 ID）

### ❌ 不适合使用索引的情况

* 低选择性字段（例如性别 male/female，索引作用小）
* 小表（如 100 行以内的表，全表扫描比索引还快）
* 频繁变更的字段（索引维护开销大）
* 字符串前缀匹配（LIKE "%abc"，索引无效）

## 6.结论

* 索引的核心作用是加速查询，减少 MySQL 扫描的数据量，提升查询性能。
* 索引并不是越多越好，过多的索引可能影响 INSERT / UPDATE / DELETE 的性能。
* 索引的设计需要结合实际业务场景，选择合适的字段进行索引优化。
